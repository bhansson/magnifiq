{% comment %}
  Magnifiq USPs List Block
  Displays AI-generated Unique Selling Points from product metafields
{% endcomment %}

{%- assign usps_items = product.metafields.magnifiq.usps.value -%}

{%- if usps_items != blank and usps_items.size > 0 -%}
    <style>
      .magnifiq-usps { margin: 2rem 0; }
      .magnifiq-usps__heading { font-size: 1.5rem; font-weight: 600; margin-bottom: 1rem; }
      .magnifiq-usps__list { padding-left: 1.5rem; display: flex; flex-direction: column; gap: 0.5rem; }
      .magnifiq-usps__list--bullets { list-style-type: disc; }
      .magnifiq-usps__list--numbered { list-style-type: decimal; }
      .magnifiq-usps__item { line-height: 1.6; }
      .magnifiq-usps__badges { display: flex; flex-wrap: wrap; gap: 0.75rem; }
      .magnifiq-usps__badge { display: flex; align-items: center; gap: 0.5rem; padding: 0.5rem 1rem; background: #f0fdf4; border: 1px solid #bbf7d0; border-radius: 9999px; font-size: 0.875rem; }
      .magnifiq-usps__badge-icon { color: #16a34a; flex-shrink: 0; }
    </style>
    <div class="magnifiq-usps magnifiq-usps--{{ block.settings.layout }}" {{ block.shopify_attributes }}>
      {%- if block.settings.show_heading -%}
        <h2 class="magnifiq-usps__heading">{{ block.settings.heading }}</h2>
      {%- endif -%}

      {%- case block.settings.layout -%}
        {%- when 'bullets' -%}
          <ul class="magnifiq-usps__list magnifiq-usps__list--bullets">
            {%- for usp in usps_items -%}
              <li class="magnifiq-usps__item">{{ usp }}</li>
            {%- endfor -%}
          </ul>

        {%- when 'numbered' -%}
          <ol class="magnifiq-usps__list magnifiq-usps__list--numbered">
            {%- for usp in usps_items -%}
              <li class="magnifiq-usps__item">{{ usp }}</li>
            {%- endfor -%}
          </ol>

        {%- when 'badges' -%}
          <div class="magnifiq-usps__badges">
            {%- for usp in usps_items -%}
              <div class="magnifiq-usps__badge">
                <svg class="magnifiq-usps__badge-icon" width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg">
                  <path d="M16.667 5L7.5 14.167L3.333 10" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                </svg>
                <span>{{ usp }}</span>
              </div>
            {%- endfor -%}
          </div>
      {%- endcase -%}
    </div>
{%- endif -%}

{% schema %}
{
  "name": "t:blocks.usps_list.name",
  "target": "section",
  "settings": [
    {
      "type": "text",
      "id": "heading",
      "label": "t:blocks.usps_list.settings.heading.label",
      "default": "t:blocks.usps_list.settings.heading.default"
    },
    {
      "type": "checkbox",
      "id": "show_heading",
      "label": "t:blocks.usps_list.settings.show_heading.label",
      "default": true
    },
    {
      "type": "select",
      "id": "layout",
      "label": "t:blocks.usps_list.settings.layout.label",
      "options": [
        { "value": "bullets", "label": "t:blocks.usps_list.settings.layout.options__1" },
        { "value": "numbered", "label": "t:blocks.usps_list.settings.layout.options__2" },
        { "value": "badges", "label": "t:blocks.usps_list.settings.layout.options__3" }
      ],
      "default": "badges"
    }
  ]
}
{% endschema %}
