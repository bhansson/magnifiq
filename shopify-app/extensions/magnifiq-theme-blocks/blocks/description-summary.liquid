{% comment %}
  Magnifiq Description Summary Block
  Displays AI-generated short product summary from metafields
{% endcomment %}

{%- assign summary_content = product.metafields.magnifiq.description_summary.value -%}

{%- if summary_content != blank -%}
  <style>
    .magnifiq-summary { margin: 2rem 0; }
    .magnifiq-summary__heading { font-size: 1.25rem; font-weight: 600; margin-bottom: 0.75rem; }
    .magnifiq-summary--paragraph .magnifiq-summary__content { line-height: 1.7; color: #374151; }
    .magnifiq-summary--highlighted .magnifiq-summary__content { padding: 1rem 1.25rem; background: linear-gradient(135deg, #f0f9ff 0%, #e0f2fe 100%); border-left: 4px solid #0ea5e9; border-radius: 0.5rem; line-height: 1.6; font-style: italic; color: #0c4a6e; }
  </style>
  <div class="magnifiq-summary magnifiq-summary--{{ block.settings.style }}" {{ block.shopify_attributes }}>
    {%- if block.settings.show_heading -%}
      <h2 class="magnifiq-summary__heading">{{ block.settings.heading }}</h2>
    {%- endif -%}

    <div class="magnifiq-summary__content">
      {{ summary_content }}
    </div>
  </div>
{%- endif -%}

{% schema %}
{
  "name": "t:blocks.description_summary.name",
  "target": "section",
  "settings": [
    {
      "type": "text",
      "id": "heading",
      "label": "t:blocks.description_summary.settings.heading.label",
      "default": "t:blocks.description_summary.settings.heading.default"
    },
    {
      "type": "checkbox",
      "id": "show_heading",
      "label": "t:blocks.description_summary.settings.show_heading.label",
      "default": false
    },
    {
      "type": "select",
      "id": "style",
      "label": "t:blocks.description_summary.settings.style.label",
      "options": [
        { "value": "paragraph", "label": "t:blocks.description_summary.settings.style.options__1" },
        { "value": "highlighted", "label": "t:blocks.description_summary.settings.style.options__2" }
      ],
      "default": "highlighted"
    }
  ]
}
{% endschema %}
