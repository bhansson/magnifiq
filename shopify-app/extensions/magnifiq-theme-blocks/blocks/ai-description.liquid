{% comment %}
  Magnifiq AI Description Block
  Displays AI-generated product description from metafields
{% endcomment %}

{%- assign description_content = product.metafields.magnifiq.description.value -%}

{%- if description_content != blank -%}
  <div
    class="magnifiq-description"
    style="
      --mq-desc-text-color: {{ block.settings.text_color }};
      --mq-desc-bg-color: {{ block.settings.background_color }};
      --mq-desc-heading-color: {{ block.settings.heading_color }};
      --mq-desc-heading-size: {{ block.settings.heading_size }}px;
      --mq-desc-text-size: {{ block.settings.text_size }}px;
      --mq-desc-line-height: {{ block.settings.line_height }};
      --mq-desc-padding-y: {{ block.settings.padding_vertical }}px;
      --mq-desc-padding-x: {{ block.settings.padding_horizontal }}px;
      --mq-desc-margin-top: {{ block.settings.margin_top }}px;
      --mq-desc-margin-bottom: {{ block.settings.margin_bottom }}px;
      --mq-desc-border-radius: {{ block.settings.border_radius }}px;
      --mq-desc-border-width: {{ block.settings.border_width }}px;
      --mq-desc-border-color: {{ block.settings.border_color }};
    "
    {{ block.shopify_attributes }}
  >
    {%- if block.settings.show_heading -%}
      <h2 class="magnifiq-description__heading">{{ block.settings.heading }}</h2>
    {%- endif -%}

    <div class="magnifiq-description__content">
      {{ description_content }}
    </div>
  </div>
{%- endif -%}

<style>
  .magnifiq-description {
    margin-top: var(--mq-desc-margin-top);
    margin-bottom: var(--mq-desc-margin-bottom);
    padding: var(--mq-desc-padding-y) var(--mq-desc-padding-x);
    background-color: var(--mq-desc-bg-color);
    border-radius: var(--mq-desc-border-radius);
    border: var(--mq-desc-border-width) solid var(--mq-desc-border-color);
  }

  .magnifiq-description__heading {
    font-size: var(--mq-desc-heading-size);
    font-weight: 600;
    margin-bottom: 1rem;
    color: var(--mq-desc-heading-color);
  }

  .magnifiq-description__content {
    font-size: var(--mq-desc-text-size);
    line-height: var(--mq-desc-line-height);
    color: var(--mq-desc-text-color);
  }

  .magnifiq-description__content p {
    margin-bottom: 1rem;
  }

  .magnifiq-description__content p:last-child {
    margin-bottom: 0;
  }
</style>

{% schema %}
{
  "name": "t:blocks.ai_description.name",
  "target": "section",
  "settings": [
    {
      "type": "header",
      "content": "t:blocks.ai_description.settings.header_content"
    },
    {
      "type": "text",
      "id": "heading",
      "label": "t:blocks.ai_description.settings.heading.label",
      "default": "t:blocks.ai_description.settings.heading.default"
    },
    {
      "type": "checkbox",
      "id": "show_heading",
      "label": "t:blocks.ai_description.settings.show_heading.label",
      "default": false
    },
    {
      "type": "header",
      "content": "t:blocks.ai_description.settings.header_colors"
    },
    {
      "type": "color",
      "id": "text_color",
      "label": "t:blocks.ai_description.settings.text_color.label",
      "default": "#374151"
    },
    {
      "type": "color",
      "id": "heading_color",
      "label": "t:blocks.ai_description.settings.heading_color.label",
      "default": "#111827"
    },
    {
      "type": "color",
      "id": "background_color",
      "label": "t:blocks.ai_description.settings.background_color.label",
      "default": "transparent"
    },
    {
      "type": "header",
      "content": "t:blocks.ai_description.settings.header_typography"
    },
    {
      "type": "range",
      "id": "heading_size",
      "label": "t:blocks.ai_description.settings.heading_size.label",
      "min": 16,
      "max": 48,
      "step": 2,
      "unit": "px",
      "default": 24
    },
    {
      "type": "range",
      "id": "text_size",
      "label": "t:blocks.ai_description.settings.text_size.label",
      "min": 12,
      "max": 24,
      "step": 1,
      "unit": "px",
      "default": 16
    },
    {
      "type": "range",
      "id": "line_height",
      "label": "t:blocks.ai_description.settings.line_height.label",
      "min": 1,
      "max": 2.5,
      "step": 0.1,
      "default": 1.7
    },
    {
      "type": "header",
      "content": "t:blocks.ai_description.settings.header_spacing"
    },
    {
      "type": "range",
      "id": "padding_vertical",
      "label": "t:blocks.ai_description.settings.padding_vertical.label",
      "min": 0,
      "max": 60,
      "step": 4,
      "unit": "px",
      "default": 0
    },
    {
      "type": "range",
      "id": "padding_horizontal",
      "label": "t:blocks.ai_description.settings.padding_horizontal.label",
      "min": 0,
      "max": 60,
      "step": 4,
      "unit": "px",
      "default": 0
    },
    {
      "type": "range",
      "id": "margin_top",
      "label": "t:blocks.ai_description.settings.margin_top.label",
      "min": 0,
      "max": 100,
      "step": 4,
      "unit": "px",
      "default": 32
    },
    {
      "type": "range",
      "id": "margin_bottom",
      "label": "t:blocks.ai_description.settings.margin_bottom.label",
      "min": 0,
      "max": 100,
      "step": 4,
      "unit": "px",
      "default": 32
    },
    {
      "type": "header",
      "content": "t:blocks.ai_description.settings.header_border"
    },
    {
      "type": "range",
      "id": "border_radius",
      "label": "t:blocks.ai_description.settings.border_radius.label",
      "min": 0,
      "max": 32,
      "step": 2,
      "unit": "px",
      "default": 0
    },
    {
      "type": "range",
      "id": "border_width",
      "label": "t:blocks.ai_description.settings.border_width.label",
      "min": 0,
      "max": 8,
      "step": 1,
      "unit": "px",
      "default": 0
    },
    {
      "type": "color",
      "id": "border_color",
      "label": "t:blocks.ai_description.settings.border_color.label",
      "default": "#e5e7eb"
    }
  ]
}
{% endschema %}
